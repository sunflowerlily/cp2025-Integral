# 亥姆霍兹线圈磁场计算与可视化实验报告

## 1. 实验目的

1.  理解双线圈系统产生磁场的基本原理，特别是亥姆霍兹线圈的结构及其产生均匀磁场的条件。
2.  通过编程实现计算两个共轴圆形线圈（可具有不同半径）在 $yz$-平面内任意点产生的磁场。
3.  利用磁场叠加原理，计算并可视化亥姆霍兹线圈（以及可选的其他双线圈配置）在 $yz$-平面内的磁场分布。
4.  分析亥姆霍兹线圈中心区域磁场的均匀性。

## 2. 实验原理与方法

**2.1 单个载流圆环的磁场贡献:**
对于一个半径为 $R_{coil}$、载有电流 $I$、中心位于 $z=z_{coil}$ 的圆形线圈，其在 $yz$-平面（$x=0$）上一点 $(0, Y, Z)$ 产生的磁场分量可以通过对毕奥-萨伐尔定律积分得到。其被积函数的核心部分（与角度 $\phi'$ 相关，$\phi'$ 为电流元在线圈上的方位角）可表示为：
*   $dB_y$ 贡献 $\propto R_{coil} (Z-z_{coil}) \sin\phi' / |\mathbf{r}'|^3$
*   $dB_z$ 贡献 $\propto R_{coil} (R_{coil} - Y\sin\phi') / |\mathbf{r}'|^3$
其中 $|\mathbf{r}'|$ 是从电流元到场点 $(0, Y, Z)$ 的距离。
完整的磁场分量 $B_y$ 和 $B_z$ 通过对 $\phi'$ 从 $0$ 到 $2\pi$ 进行数值积分（例如使用 `numpy.trapz`）并乘以常数因子 $\mu_0 I / (4\pi)$ 得到。

**2.2 双线圈系统:**
本实验考虑两个共轴圆形线圈：
*   **线圈1 (下/参数 `r_low`):** 半径 $R_1$，中心位于 $z_{c1} = +d/2$。
*   **线圈2 (上/参数 `r_up`):** 半径 $R_2$，中心位于 $z_{c2} = -d/2$。
其中 $d$ 是两个线圈中心之间的轴向距离。两个线圈通以相同方向、相同大小的电流 $I$。
总磁场是两个线圈产生磁场的矢量和。

**2.3 亥姆霍兹线圈条件:**
亥姆霍兹线圈是双线圈系统的一个特例，满足：
1.  两个线圈半径相同：$R_1 = R_2 = R$。
2.  线圈间距等于该半径：$d = R$。

**2.4 计算方法:**
1.  **定义双线圈磁场函数:** 实现一个函数，输入参数包括两个线圈的半径 $R_1$ (`r_low`)、$R_2$ (`r_up`)、它们之间的距离 $d$，以及计算场点的 $Y, Z$ 坐标网格和积分用的角度 $\phi$ 网格。
2.  对于 $yz$-平面上的每个网格点 $(Y_i, Z_j)$:
    *   计算线圈1对该点的磁场贡献 $(B_{y1}, B_{z1})$。
    *   计算线圈2对该点的磁场贡献 $(B_{y2}, B_{z2})$。
    *   根据代码实现，可以直接在积分前将被积函数叠加：
        $$ dby = \text{dby\_from\_coil1} + \text{dby\_from\_coil2} $$
        $$ dbz = \text{dbz\_from\_coil1} + \text{dbz\_from\_coil2} $$
    *   然后对叠加后的被积函数进行数值积分得到总磁场 $(B_y^{total}, B_z^{total})$。
3.  **可视化:**
    *   使用 `matplotlib.pyplot.streamplot` 绘制 $yz$-平面内的磁场线。
    *   可选地，使用 `matplotlib.pyplot.contourf` 绘制磁感应强度大小 $|B| = \sqrt{(B_y^{total})^2 + (B_z^{total})^2}$ 的等值线图。

**2.5 使用参数 (示例，请根据实际情况填写):**
*   真空磁导率 $\mu_0 = 4\pi \times 10^{-7} \text{ T}\cdot\text{m/A}$
*   线圈电流 $I = 1.0 \text{ A}$
*   **亥姆霍兹配置:**
    *   线圈1半径 $R_1$ (`r_low`): [例如 0.5 m]
    *   线圈2半径 $R_2$ (`r_up`): [例如 0.5 m, 与 $R_1$ 相同]
    *   线圈间距 $d$: [例如 0.5 m, 等于 $R_1$]
*   **(可选) 非亥姆霍兹配置 (如果研究):**
    *   线圈1半径 $R_1$: [值]
    *   线圈2半径 $R_2$: [值]
    *   线圈间距 $d$: [值]

## 3. 实验结果

**3.1 $yz$-平面内磁场分布 (亥姆霍兹配置):**

**3.1.1 磁场线图:**

[在此处插入亥姆霍兹线圈 ($R_1=R_2=R$, $d=R$) 在 $yz$-平面内的磁场线图 (`streamplot`)。图像应清晰，包含坐标轴标签、标题（注明参数值），并标出两个线圈的横截面位置。]

**图像说明:** (简要描述亥姆霍兹配置下磁场线的形状、密度变化，特别关注两线圈中心区域的磁场线形态。例如，轴线 $Y=0$ 附近的磁场线是否平行且均匀分布？)
[在此处填写你的说明]

**3.1.2 (可选) 磁感应强度大小等值线图 (亥姆霍兹配置):**

[如果完成，在此处插入亥姆霍兹配置下磁感应强度大小 $|B|$ 的等值线图。]

**图像说明:** (简要描述磁感应强度大小的分布情况，中心区域的均匀性如何从等值线疏密程度反映出来。)
[在此处填写你的说明]

**3.2 (可选) $yz$-平面内磁场分布 (非亥姆霍兹配置):**
(如果研究了非亥姆霍兹配置，例如 $d \neq R$ 或 $R_1 \neq R_2$，在此处展示其磁场线图和说明。)

[在此处插入非亥姆霍兹配置的磁场线图。]

**图像说明:** (描述与亥姆霍兹配置相比，磁场分布有何不同。)
[在此处填写你的说明]

## 4. 分析与讨论

**4.1 轴线上磁场的均匀性 (针对亥姆霍兹配置):**
(根据你在 $yz$-平面计算得到的 $B_z^{total}(0, Z_j)$ 数据，即 $Y=0$ 轴线上的磁场值，讨论亥姆霍兹线圈在中心区域 $(Z \approx 0)$ 磁场的平坦程度。可以提取这些数据单独绘制 $B_z(0,Z)$ vs $Z$ 的曲线进行分析，或直接从 $yz$ 平面图中观察。亥姆霍兹线圈理论上在中心点 $Z=0$ 处，$dB_z/dZ = 0$ 且 $d^2B_z/dZ^2 = 0$。你的结果是否支持这一理论？)
[在此处写下你的分析。如果提取了轴线数据并作图，可在此处插入该辅助图。]

**4.2 $yz$-平面内磁场的特点 (亥姆霍兹配置):**
(根据你的磁场线图和（可选的）等值线图，讨论：
*   磁场线是如何从一个线圈连接到另一个线圈或发散到远处的？
*   两线圈之间的区域，特别是靠近轴线中心的部分，磁场线是否近似平行且等间距？这如何体现磁场的均匀性？
*   磁场最强的区域在哪里？最弱的区域在哪里？
)
[在此处写下你的分析]

**4.3 (可选) 非亥姆霍兹配置的影响:**
(如果研究了非亥姆霍兹配置，讨论参数变化（如改变 $d$ 或 $R_1 \neq R_2$）对中心区域磁场均匀性的影响。)
[在此处写下你的分析]

**4.4 计算方法与遇到的问题:**
(讨论你在实现计算过程中遇到的任何挑战，例如：
*   数值积分的点数（代码中 `phi = np.linspace(0, 2*np.pi, 20)`）对结果精度和计算时间的影响。
*   网格点密度（代码中 `y = np.linspace(-2*r,2*r,25)`, `z = np.linspace(-2*d,2*d,25)`）对可视化效果和计算量的影响。
*   验证代码正确性的方法（例如，与轴线上解析公式在 $Y=0$ 时的结果对比，或与已知结果对比）。
*   绘图函数中参数传递的注意事项（例如，确保绘图函数使用传入的参数而不是硬编码值）。
)
[在此处写下你的讨论]

## 5. 结论

(总结本次实验的主要发现和学习到的内容。例如：成功计算并可视化了双线圈系统（特别是亥姆霍兹线圈）的磁场分布，通过分析 $yz$-平面数据验证了亥姆霍兹线圈在中心区域产生相对均匀磁场的特性，理解了不同参数配置对磁场分布的影响等。)
[在此处写下你的结论]

## 6. 附录：Python 代码

(可以将你的 Python 代码的关键部分粘贴在此处，或说明代码已通过其他方式提交。)

```python

```

---